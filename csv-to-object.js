import { rankings } from "./position-rankings.js";
import { isFullPPR } from "./user.js";

// Destructuring the rankings object
const { combined: combinedPlayerRankings, wr: wrRankings, rb: rbRankings, qb: qbRankings, te: teRankings, def: defRankings } = rankings;

// Convert excel rankings using fantasy-football-rankings.ipynb 
// Manually populate csv strings based on league point format
let combinedCsvString, wrCsvString, rbCsvString;
const qbCsvString = `\nPatrick Mahomes\nJalen Hurts,Josh Allen\nAnthony Richardson,Lamar Jackson,C.J. Stroud\nJoe Burrow\nJordan Love,Kyler Murray\nBrock Purdy,Jared Goff\nDak Prescott,Tua Tagovailoa\nCaleb Williams\nTrevor Lawrence,Jayden Daniels,Matthew Stafford\nJustin Herbert,Aaron Rodgers,Kirk Cousins\nBaker Mayfield,Deshaun Watson,Will Levis\nGeno Smith,Bo Nix\nSam Darnold,Derek Carr,Bryce Young,Justin Fields,Russell Wilson,Drake Maye,Daniel Jones,Gardner Minshew II,Jacoby Brissett\n`;
const teCsvString = `\nTravis Kelce,Sam LaPorta\nTrey McBride,Mark Andrews\nDalton Kincaid\n\nGeorge Kittle,Evan Engram,Kyle Pitts\nDavid Njoku\nDalton Schultz,Dallas Goedert\nCole Kmet,Jake Ferguson\nLuke Musgrave\nPat Freiermuth,Isaiah Likely,Brock Bowers\nT.J. Hockenson\nTyler Conklin,Ben Sinnott,Cade Otton\nMike Gesicki,Hunter Henry,Will Dissly,Hayden Hurst,Michael Mayer,Noah Fant,Dawson Knox,Chig Okonkwo,Kylen Granson,Greg Dulcich\n`;
const defCsvString = `SF,NYJ,BAL,KC,HOU,PIT,CLE,SEA,DAL,BUF,PHI,LAC,CHI,LAR,TB,OAK,NYG,MIN,MIA,NE,GB,DEN`;


// Using relevant rankings based on league points format
if (isFullPPR) {
    combinedCsvString = `Christian McCaffrey,Bijan Robinson,Breece Hall,Jonathan Taylor,Tyreek Hill,Justin Jefferson,Ja'Marr Chase,CeeDee Lamb,Amon-Ra St. Brown,Saquon Barkley,Garrett Wilson,A.J. Brown\nJahmyr Gibbs,Marvin Harrison,Nico Collins,Derrick Henry,Chris Olave,Drake London,Cooper Kupp,Davante Adams,Patrick Mahomes,Kyren Williams,Travis Kelce,Sam LaPorta,De'Von Achane\nJosh Jacobs,Travis Etienne,James Cook,Jalen Hurts,Josh Allen,Trey McBride,Joe Mixon,Mike Evans,Puka Nacua,DJ Moore,Mark Andrews,Michael Pittman,Brandon Aiyuk,Rachaad White\nAnthony Richardson,Lamar Jackson,C.J. Stroud,Deebo Samuel,DK Metcalf,DeVonta Smith,Jaylen Waddle,Aaron Jones,Dalton Kincaid,Kenneth Walker\nIsiah Pacheco,Najee Harris,David Montgomery,Zay Flowers,Malik Nabers,Terry McLaurin,Joe Burrow,Alvin Kamara,Rhamondre Stevenson\nJordan Love,Kyler Murray,Amari Cooper,Tee Higgins,D'Andre Swift,Stefon Diggs,Tank Dell,Christian Kirk,Zamir White,James Conner,George Kittle,Evan Engram,Kyle Pitts\nJaylen Warren,Javonte Williams,Diontae Johnson,Rome Odunze,Brock Purdy,Jared Goff,Austin Ekeler,Trey Benson,J.K. Dobbins,George Pickens,Chris Godwin,Tony Pollard,David Njoku\nJaxon Smith-Njigba,Courtland Sutton,Zack Moss,Devin Singletary,Chuba Hubbard,Dak Prescott,Tua Tagovailoa,Dalton Schultz,Dallas Goedert,Christian Watson,Brian Robinson\nCaleb Williams,Jerome Ford,Nick Chubb,Cole Kmet,Raheem Mostert,Tyjae Spears,Keenan Allen,Calvin Ridley,Chase Brown,Jake Ferguson,Xavier Worthy,Dontayvion Wicks\nTrevor Lawrence,Jayden Daniels,Matthew Stafford,Joshua Palmer,DeAndre Hopkins,Tyler Lockett,Jayden Reed,Luke Musgrave,Hollywood Brown,Ezekiel Elliott\nBrian Thomas,Keon Coleman,Jordan Addison,Rashee Rice,Blake Corum,Zach Charbonnet,Pat Freiermuth,Justin Herbert,Gus Edwards,Isaiah Likely,Brock Bowers,Aaron Rodgers,Kirk Cousins,Jonathon Brooks\nAdonai Mitchell,Khalil Shakir,T.J. Hockenson,Rico Dowdle,Jaylen Wright,MarShawn Lloyd,Baker Mayfield,DJ Chark,Tyler Allgeier,Jameson Williams,Jakobi Meyers,Deshaun Watson,Will Levis\nJaleel McLaughlin,Brandin Cooks,Ladd McConkey,DeMario Douglas,Darnell Mooney,Jerry Jeudy,Geno Smith,Bo Nix,Jahan Dotson,Andre Iosivas,Xavier Legette,Michael Wilson,Tyler Conklin,Ben Sinnott,Cade Otton,Ty Chandler,Antonio Gibson,Roschon Johnson,Tank Bigsby,Romeo Doubs\nTyrone Tracy Jr.,Rashid Shaheed,Darius Slayton,Gabe Davis,Greg Dortch,Cam Akers,Khalil Herbert,Trey Sermon,Kimani Vidal,Audric Estime,Elijah Moore,Curtis Samuel,Allen Lazard,Van Jefferson,Sam Darnold,Derek Carr,Bryce Young,Drake Maye,Rashod Bateman,Wan'Dale Robinson,Kendrick Bourne,Ja'Lynn Polk,Mike Gesicki,Hunter Henry,Dameon Pierce,Dylan Laube,Justin Fields,Russell Wilson,Marquez Valdez-Scantling,Adam Thielen,Ricky Pearsall,Jermaine Burton,Kendre Miller,Miles Sanders,D'Onta Foreman,Isaac Guerendo,Ray Davis,Jamaal Williams,Carson Steele,Braelon Allen,Javon Baker,Jordan Whittington,Marvin Mims,Jalin Hyatt,Troy Franklin,Tyler Boyd,Kenneth Gainwell,Samaje Perine,Will Dissly,Hayden Hurst,Michael Mayer,Noah Fant,Alec Pierce,Dawson Knox,Chig Okonkwo,Deuce Vaughn,Treylon Burks,Calvin Austin III,Kylen Granson,Greg Dulcich,Daniel Jones,Gardner Minshew II,Jacoby Brissett\n`;
    wrCsvString = `Tyreek Hill,Justin Jefferson,Ja'Marr Chase,CeeDee Lamb,Amon-Ra St. Brown,Garrett Wilson,A.J. Brown\nMarvin Harrison,Nico Collins,Chris Olave,Drake London,Cooper Kupp,Davante Adams\nMike Evans,Puka Nacua,DJ Moore,Michael Pittman,Brandon Aiyuk\nDeebo Samuel,DK Metcalf,DeVonta Smith,Jaylen Waddle\nZay Flowers,Malik Nabers,Terry McLaurin\nAmari Cooper,Tee Higgins,Stefon Diggs,Tank Dell,Christian Kirk\nDiontae Johnson,Rome Odunze,George Pickens,Chris Godwin\nJaxon Smith-Njigba,Courtland Sutton,Christian Watson\nKeenan Allen,Calvin Ridley,Xavier Worthy,Dontayvion Wicks\nJoshua Palmer,DeAndre Hopkins,Tyler Lockett,Jayden Reed,Hollywood Brown\nBrian Thomas,Keon Coleman,Jordan Addison,Rashee Rice\nAdonai Mitchell,Khalil Shakir,DJ Chark,Jameson Williams,Jakobi Meyers,Jahan Dotson\nBrandin Cooks,Ladd McConkey,DeMario Douglas,Darnell Mooney,Jerry Jeudy,Andre Iosivas,Xavier Legette,Michael Wilson,Romeo Doubs,Elijah Moore\nRashid Shaheed,Darius Slayton,Gabe Davis,Greg Dortch,Curtis Samuel,Ricky Pearsall,Van Jefferson,Rashod Bateman,Wan'Dale Robinson,Kendrick Bourne,Ja'Lynn Polk,Javon Baker,Mike Williams,Marquez Valdez-Scantling,Adam Thielen,Malachi Corley,Jermaine Burton,Jordan Whittington,Marvin Mims,Jalin Hyatt,Troy Franklin,Tyler Boyd,Alec Pierce,Treylon Burks,Calvin Austin III\n`;
    rbCsvString = `Christian McCaffrey,Bijan Robinson,Breece Hall,Jonathan Taylor,Saquon Barkley\nJahmyr Gibbs,Derrick Henry,Kyren Williams,Travis Etienne,De'Von Achane\nJames Cook,Josh Jacobs,Joe Mixon,Rachaad White\nAaron Jones,Isiah Pacheco,Kenneth Walker,Najee Harris\nJames Conner,David Montgomery,Alvin Kamara,Rhamondre Stevenson\nD'Andre Swift,Tony Pollard,Zamir White\nJaylen Warren,Javonte Williams,Austin Ekeler,J.K. Dobbins\nJonathon Brooks,Zack Moss,Devin Singletary,Brian Robinson\nJerome Ford,Nick Chubb,Raheem Mostert,Tyjae Spears,Trey Benson,Chase Brown\nEzekiel Elliott\nBlake Corum,Zach Charbonnet,Gus Edwards,Chuba Hubbard\nRico Dowdle,Jaylen Wright,Marshawn Lloyd,Tyler Allgeier\nJaleel McLaughlin,Ty Chandler,Antonio Gibson,Roschon Johnson,Tank Bigsby\nTyrone Tracy Jr.,Khalil Herbert,Trey Sermon,Kimani Vidal,Audric Estime,Dameon Pierce,Dylan Laube,Kendre Miller,Miles Sanders,D'Onta Foreman,Isaac Guerendo,Jamaal Williams,Carson Steele,Braelon Allen,Kenneth Gainwell,Samaje Perine,Deuce Vaughn,Cam Akers\n`;

} else {
    combinedCsvString = `Christian McCaffrey,Bijan Robinson,Breece Hall,Jonathan Taylor,Tyreek Hill,Justin Jefferson,Ja'Marr Chase,CeeDee Lamb,Amon-Ra St. Brown,Saquon Barkley,Garrett Wilson,A.J. Brown\nJahmyr Gibbs,Marvin Harrison,Nico Collins,Derrick Henry,Chris Olave,Drake London,Cooper Kupp,Davante Adams,Patrick Mahomes,Kyren Williams,Travis Kelce,Sam LaPorta,De'Von Achane\nJosh Jacobs,Travis Etienne,James Cook,Jalen Hurts,Josh Allen,Trey McBride,Joe Mixon,Mike Evans,Puka Nacua,DJ Moore,Mark Andrews,Michael Pittman,Brandon Aiyuk,Rachaad White\nAnthony Richardson,Lamar Jackson,C.J. Stroud,Deebo Samuel,DK Metcalf,DeVonta Smith,Jaylen Waddle,Aaron Jones,Dalton Kincaid,Kenneth Walker\nIsiah Pacheco,Najee Harris,David Montgomery,Zay Flowers,Malik Nabers,Terry McLaurin,Joe Burrow,Alvin Kamara,Rhamondre Stevenson\nJordan Love,Kyler Murray,Amari Cooper,Tee Higgins,D'Andre Swift,Stefon Diggs,Tank Dell,Christian Kirk,Zamir White,James Conner,George Kittle,Evan Engram,Kyle Pitts\nJaylen Warren,Javonte Williams,Diontae Johnson,Rome Odunze,Brock Purdy,Jared Goff,Austin Ekeler,Trey Benson,J.K. Dobbins,George Pickens,Chris Godwin,Tony Pollard,David Njoku\nJaxon Smith-Njigba,Courtland Sutton,Zack Moss,Devin Singletary,Chuba Hubbard,Dak Prescott,Tua Tagovailoa,Dalton Schultz,Dallas Goedert,Christian Watson,Brian Robinson\nCaleb Williams,Jerome Ford,Nick Chubb,Cole Kmet,Raheem Mostert,Tyjae Spears,Keenan Allen,Calvin Ridley,Chase Brown,Jake Ferguson,Xavier Worthy,Dontayvion Wicks\nTrevor Lawrence,Jayden Daniels,Matthew Stafford,Joshua Palmer,DeAndre Hopkins,Tyler Lockett,Jayden Reed,Luke Musgrave,Hollywood Brown,Ezekiel Elliott\nBrian Thomas,Keon Coleman,Jordan Addison,Rashee Rice,Blake Corum,Zach Charbonnet,Pat Freiermuth,Justin Herbert,Gus Edwards,Isaiah Likely,Brock Bowers,Aaron Rodgers,Kirk Cousins,Jonathon Brooks\nAdonai Mitchell,Khalil Shakir,T.J. Hockenson,Rico Dowdle,Jaylen Wright,MarShawn Lloyd,Baker Mayfield,DJ Chark,Tyler Allgeier,Jameson Williams,Jakobi Meyers,Deshaun Watson,Will Levis\nJaleel McLaughlin,Brandin Cooks,Ladd McConkey,DeMario Douglas,Darnell Mooney,Jerry Jeudy,Geno Smith,Bo Nix,Jahan Dotson,Andre Iosivas,Xavier Legette,Michael Wilson,Tyler Conklin,Ben Sinnott,Cade Otton,Ty Chandler,Antonio Gibson,Roschon Johnson,Tank Bigsby,Romeo Doubs\nTyrone Tracy Jr.,Rashid Shaheed,Darius Slayton,Gabe Davis,Greg Dortch,Cam Akers,Khalil Herbert,Trey Sermon,Kimani Vidal,Audric Estime,Elijah Moore,Curtis Samuel,Allen Lazard,Van Jefferson,Sam Darnold,Derek Carr,Bryce Young,Drake Maye,Rashod Bateman,Wan'Dale Robinson,Kendrick Bourne,Ja'Lynn Polk,Mike Gesicki,Hunter Henry,Dameon Pierce,Dylan Laube,Justin Fields,Russell Wilson,Marquez Valdez-Scantling,Adam Thielen,Ricky Pearsall,Jermaine Burton,Kendre Miller,Miles Sanders,D'Onta Foreman,Isaac Guerendo,Ray Davis,Jamaal Williams,Carson Steele,Braelon Allen,Javon Baker,Jordan Whittington,Marvin Mims,Jalin Hyatt,Troy Franklin,Tyler Boyd,Kenneth Gainwell,Samaje Perine,Will Dissly,Hayden Hurst,Michael Mayer,Noah Fant,Alec Pierce,Dawson Knox,Chig Okonkwo,Deuce Vaughn,Treylon Burks,Calvin Austin III,Kylen Granson,Greg Dulcich,Daniel Jones,Gardner Minshew II,Jacoby Brissett\n`;
    wrCsvString = `Tyreek Hill,Justin Jefferson,Ja'Marr Chase,CeeDee Lamb,Garrett Wilson,A.J. Brown,Amon-Ra St. Brown\nMarvin Harrison,Nico Collins,Chris Olave,Drake London,Davante Adams\nCooper Kupp,Mike Evans,DJ Moore,Michael Pittman,Brandon Aiyuk,Puka Nacua\nDeebo Samuel,DK Metcalf,DeVonta Smith\nJaylen Waddle,Zay Flowers,Malik Nabers,Terry McLaurin\nAmari Cooper,Tee Higgins,Stefon Diggs,Tank Dell\nChristian Kirk,Rome Odunze,George Pickens,Diontae Johnson,Chris Godwin\nCourtland Sutton,Jaxon Smith-Njigba,Christian Watson\nCalvin Ridley,Xavier Worthy,Dontayvion Wicks\nJoshua Palmer,DeAndre Hopkins,Keenan Allen,Jayden Reed,Hollywood Brown\nBrian Thomas,Keon Coleman,Jordan Addison,Tyler Lockett,Adonai Mitchell\nKhalil Shakir,Rashee Rice,DJ Chark,Jameson Williams,Jakobi Meyers\nBrandin Cooks,Darnell Mooney,Jerry Jeudy,DeMario Douglas,Jahan Dotson,Andre Iosivas,Xavier Legette,Michael Wilson,Romeo Doubs\nRashid Shaheed,Darius Slayton,Ladd McConkey,Gabe Davis,Allen Lazard,Elijah Moore,Van Jefferson,Rashod Bateman,Greg Dortch,Curtis Samuel,Kendrick Bourne,Ja'Lynn Polk,Wan'Dale Robinson,Marquez Valdez-Scantling,Adam Thielen,Ricky Pearsall,Jermaine Burton,Javon Baker,Jordan Whittington,Marvin Mims,Jalin Hyatt,Troy Franklin,Tyler Boyd,Alec Pierce,Treylon Burks,Calvin Austin III\n`;
    rbCsvString = `Christian McCaffrey,Bijan Robinson,Breece Hall,Jonathan Taylor,Saquon Barkley\nDerrick Henry,Kyren Williams,Jahmyr Gibbs,De'Von Achane\nJosh Jacobs,Travis Etienne,James Cook,Joe Mixon,Rachaad White\nAaron Jones,Kenneth Walker,Najee Harris\nDavid Montgomery,Isiah Pacheco,Alvin Kamara\nRhamondre Stevenson,Zamir White,James Conner\nJaylen Warren,Javonte Williams,Trey Benson,D'Andre Swift,J.K. Dobbins,Tony Pollard\nChuba Hubbard,Zack Moss,Devin Singletary,Brian Robinson,Austin Ekeler\nJerome Ford,Nick Chubb,Raheem Mostert,Tyjae Spears\nEzekiel Elliott,Chase Brown\nBlake Corum,Zach Charbonnet,Gus Edwards,Jonathon Brooks\nRico Dowdle,Jaylen Wright,MarShawn Lloyd,Tyler Allgeier\nTy Chandler,Antonio Gibson,Roschon Johnson,Tank Bigsby\nTyrone Tracy Jr.,Audric Estime,Jaleel McLaughlin,Cam Akers,Khalil Herbert,Trey Sermon,Kimani Vidal,Dameon Pierce,Dylan Laube,Kendre Miller,Miles Sanders,D'Onta Foreman,Isaac Guerendo,Ray Davis,Jamaal Williams,Carson Steele,Braelon Allen,Kenneth Gainwell,Samaje Perine,Deuce Vaughn\n`;
}

// Takes in a player full name and searches for it in the csv string rankings
function findPosition(playerFullName) {
    if (qbCsvString.includes(playerFullName)) { return 'qb' };
    if (teCsvString.includes(playerFullName)) { return 'te' };
    if (rbCsvString.includes(playerFullName)) { return 'rb' };
    if (wrCsvString.includes(playerFullName)) { return 'wr' };
    return 'Player not found';
}

// Parses provided CSV and populates into provided Object
function csvToObject(csv, obj, pos) {
    const rows = csv.split('\n');
    for (let i = 0; i < rows.length; i++) {
        const row = rows[i] === "" ? [] : rows[i].split(',');
        const rowWithPosition = [];
        for (let i=0; i < row.length; i++) {
            let fullname = row[i];
            let position = pos;
            pos === 'combined' ? position = findPosition(fullname) : false;
            rowWithPosition.push({ 'fullname': fullname, 'position': position});
        }
        obj[`round${i+1}`] = rowWithPosition;
    }
}

function createRankingObjects() {
    csvToObject(combinedCsvString, combinedPlayerRankings, 'combined');
    csvToObject(wrCsvString, wrRankings, 'wr');
    csvToObject(rbCsvString, rbRankings, 'rb');
    csvToObject(qbCsvString, qbRankings, 'qb');
    csvToObject(teCsvString, teRankings, 'te');
    csvToObject(defCsvString, defRankings, 'def');
}

export {createRankingObjects};